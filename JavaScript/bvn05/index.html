<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TodoList</title>
    <style>
        .completed {
            color: red;
            text-decoration: line-through;
        }
    </style>
</head>

<body>
    <div class="todoList">
        <h2>TodoList App</h2>
        <input type="text" id="todoInput" placeholder="Enter todo title ..." />
        <button id="addTodoBtn">Add</button>
        <ul id="todoItems"></ul>
    </div>

    <script>
        const todoItems = document.querySelector("#todoItems");
        const todoInput = document.querySelector("#todoInput");
        const addTodoBtn = document.querySelector("#addTodoBtn");

        let todos = [];


        function renderTodos() {
            todoItems.innerHTML = "";

            if (todos.length === 0) {
                const empty = document.createElement("li");
                empty.textContent = "Danh sách công việc trống";
                todoItems.appendChild(empty);
            } else {
                todos.forEach((todo, index) => {
                    const todoItem = document.createElement("li");

                    const checkbox = document.createElement("input");
                    checkbox.type = "checkbox";
                    checkbox.checked = todo.status;
                    checkbox.addEventListener("change", function() {
                        todoStatus(index);
                    });

                    const todoTitle = document.createElement("span");
                    todoTitle.textContent = todo.title;
                    if (todo.status) {
                        todoTitle.classList.add("completed");
                    }

                    const editBtn = document.createElement("button");
                    editBtn.textContent = "Edit";
                    editBtn.addEventListener("click", function () {
                        editTodoTitle(index);
                    });

                    const deleteBtn = document.createElement("button");
                    deleteBtn.textContent = "Delete";
                    deleteBtn.addEventListener("click", function () {
                        deleteTodo(index);
                    });

                    todoItem.appendChild(checkbox);
                    todoItem.appendChild(todoTitle);
                    todoItem.appendChild(editBtn);
                    todoItem.appendChild(deleteBtn);

                    todoItems.appendChild(todoItem);
                });
            }
        }


        function addTodo() {
            const title = todoInput.value.trim();

            if (title) {
                const newTodo = {
                    title: title,
                    status: false,
                };

                todos.push(newTodo);
                renderTodos();
                todoInput.value = "";
            } else {
                alert("Tên công việc không được để trống");
            }
        }


        function deleteTodo(index) {
            const confirmed = window.confirm("Bạn có chắc muốn xóa công việc này?");

            if (confirmed) {
                todos.splice(index, 1);
                renderTodos();
            }
        }


        function editTodoTitle(index) {
            const newTitle = window.prompt("Nhập tên mới cho công việc:", todos[index].title);

            if (newTitle !== null) {
                const title = newTitle.trim();

                if (title) {
                    todos[index].title = title;
                    renderTodos();
                } else {
                    alert("Tên công việc không được để trống");
                }
            }
        }


        function todoStatus(index) {
            todos[index].status = !todos[index].status;
            renderTodos();
        }


        addTodoBtn.addEventListener("click", addTodo);


        todoInput.addEventListener("keyup", function (event) {
            if (event.key === "Enter") {
                addTodo();
            }
        });


        renderTodos();
    </script>
</body>

</html>